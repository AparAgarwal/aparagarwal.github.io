const CONFIG={typing:{texts:["Software Developer","Web Developer","Tech Enthusiast"],typeSpeed:150,deleteSpeed:100,pauseDuration:1e3},carousel:{skills:["HTML","CSS","JavaScript","React","Node.js","Express.js","MongoDB","Git","GitHub","REST APIs","Docker","Postman"],baseSpeed:.5,velocityEffect:.5},cursor:{smoothness:.2},cards:{dragThreshold:100,swapDuration:500,scaleFactor:.05,offsetY:20},lenis:{duration:1.2,easing:e=>Math.min(1,1.001-Math.pow(2,-10*e)),smooth:!0}},PROJECTS_DATA=[{title:"Code Editor",description:"A code editor with syntax highlighting, auto-completion, and real-time code execution.",tech:["HTML","CSS","JavaScript","Git","GitHub"],github:"https://github.com/AparAgarwal/code-editor",liveDemo:"https://code.aparagarwal.tech/"},{title:"Portfolio",description:"A modern, responsive portfolio website showcasing my skills, projects, and contact information. (This website)",tech:["HTML","CSS","JavaScript","Git","GitHub"],github:"https://github.com/AparAgarwal/Portfolio",liveDemo:"https://aparagarwal.tech/"},{title:"News Website",description:"Clean and mobile-friendly news website showcasing up-to-date articles with a focus on readability and responsiveness.",tech:["HTML","CSS","JavaScript"],github:"https://github.com/AparAgarwal/News-Website",liveDemo:"https://news.aparagarwal.tech/"},{title:"Kernel Canvas",description:"A drag-and-drop interface for Docker container management with real-time monitoring and visual orchestration.",tech:["React","Node.js","Docker","Material-UI","Socket.io"],github:"https://github.com/AparAgarwal/KernelCanvas",liveDemo:null},{title:"Campus Navigator",description:"A Flutter-based mobile application designed to help users navigate around campus with interactive maps, real-time location tracking, and route planning.",tech:["Flutter","Dart","Google Maps API","OpenRouteService"],github:"https://github.com/AparAgarwal/campus-navigator",liveDemo:null},{title:"URL Shortener",description:"A modern, secure URL shortening service with user authentication, click analytics, input validation, and a clean web interface with RESTful API.",tech:["Node.js","Express","MongoDB","JWT","EJS"],github:"https://github.com/AparAgarwal/url-shortener",liveDemo:"https://url.aparagarwal.tech/"},{title:"Library Management System",description:"A full-stack library management platform with robust backend architecture, role-based access control, and Docker-optimized deployment.",tech:["React","Node.js","Express","PostgreSQL","Redis","Docker"],github:"https://github.com/AparAgarwal/library-management-v2",liveDemo:null}];class TypingEffect{constructor(e,t,s){this.element=e,this.texts=t,this.config=s,this.currentIndex=0,this.charIndex=0}type(){this.charIndex<this.texts[this.currentIndex].length?(this.element.textContent+=this.texts[this.currentIndex].charAt(this.charIndex++),setTimeout(()=>this.type(),this.config.typeSpeed)):setTimeout(()=>this.erase(),this.config.pauseDuration)}erase(){this.charIndex>0?(this.element.textContent=this.texts[this.currentIndex].substring(0,this.charIndex-1),this.charIndex--,setTimeout(()=>this.erase(),this.config.deleteSpeed)):(this.currentIndex=(this.currentIndex+1)%this.texts.length,setTimeout(()=>this.type(),this.config.typeSpeed))}start(){this.type()}}const initializeSmoothScroll=()=>{const e=new Lenis(CONFIG.lenis),t=s=>{e.raf(s),requestAnimationFrame(t)};return requestAnimationFrame(t),e},setupAnchorLinks=e=>{document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",function(t){t.preventDefault();const s=this.getAttribute("href"),n=document.querySelector(s);n&&e.scrollTo(n)})})},populateCarouselTrack=(e,t)=>{if(!e)return;e.innerHTML="",t.forEach(t=>{const s=document.createElement("div");s.className="carousel-item",s.textContent=t,e.appendChild(s)});const s=Array.from(e.children);for(let t=0;t<4;t++)s.forEach(t=>e.appendChild(t.cloneNode(!0)))},animateCarousel=(e,t,s)=>{if(!e||!t)return;let n=0,i=0,a=0;const o=()=>{e&&(a=e.scrollWidth/5)};window.addEventListener("resize",o),setTimeout(o,100);const r=()=>{if(a>0){const o=s.velocity||0,r=CONFIG.carousel.baseSpeed,c=CONFIG.carousel.velocityEffect;n+=-r-o*c;i+=r+o*c,n<=-a&&(n+=a),n>0&&(n-=a),i>=0&&(i-=a),i<-a&&(i+=a),e.style.transform=`translateX(${n}px)`,t.style.transform=`translateX(${i}px)`}requestAnimationFrame(r)};r()},initializeMobileMenu=()=>{const e=document.querySelector(".hamburger-menu"),t=document.querySelector(".nav-links"),s=document.querySelectorAll(".nav-links a");e&&t&&(e.addEventListener("click",()=>{t.classList.toggle("nav-active"),e.classList.toggle("toggle");const s=t.classList.contains("nav-active");e.setAttribute("aria-expanded",s)}),s.forEach(s=>{s.addEventListener("click",()=>{t.classList.remove("nav-active"),e.classList.remove("toggle"),e.setAttribute("aria-expanded","false")})}))},initializeCustomCursor=()=>{const e=document.querySelector("[data-cursor-dot]");if(!e)return;let t=0,s=0,n=0,i=0;window.addEventListener("mousemove",e=>{t=e.clientX,s=e.clientY});const a=()=>{const o=CONFIG.cursor.smoothness;n+=(t-n)*o,i+=(s-i)*o,e.style.left=`${n}px`,e.style.top=`${i}px`,requestAnimationFrame(a)};a();document.querySelectorAll("a, button, input, textarea, .hamburger-menu").forEach(t=>{t.addEventListener("mouseenter",()=>e.classList.add("hidden")),t.addEventListener("mouseleave",()=>e.classList.remove("hidden"))}),document.addEventListener("mouseover",t=>{(t.target.closest(".window-dots")||t.target.closest(".github-btn"))&&e.classList.add("hidden")}),document.addEventListener("mouseout",t=>{(t.target.closest(".window-dots")||t.target.closest(".github-btn"))&&e.classList.remove("hidden")})},renderProjectCards=(e,t)=>{e&&(e.innerHTML="",t.forEach(t=>{const s=document.createElement("div");s.className="stack-card",s.dataset.github=t.github,s.dataset.liveDemo=t.liveDemo??"";const n=t.liveDemo&&""!==t.liveDemo?"Swipe for Live Demo":"Swipe for GitHub";s.innerHTML=`\n            <div class="card-header">\n                <div class="window-dots">\n                    <span class="dot-red"></span>\n                    <span class="dot-yellow"></span>\n                    <span class="dot-green"></span>\n                </div>\n            </div>\n            <div class="card-content">\n                <h3>${t.title}</h3>\n                <div class="tech-tags">\n                    ${t.tech.map(e=>`<span>${e}</span>`).join("")}\n                </div>\n                <p>${t.description}</p>\n            </div>\n            <div class="mobile-hints">\n                <div class="mobile-hint mobile-hint-left">\n                    <span>← ${n}</span>\n                </div>\n                <div class="mobile-hint mobile-hint-right">\n                    <span>Next Project →</span>\n                </div>\n            </div>\n        `,e.appendChild(s)}))},initializeCardStack=e=>{if(!e)return;let t=!1,s=0,n=0,i=null;const a=CONFIG.cards.dragThreshold,o=(CONFIG.cards.swapDuration,(t,s=1)=>{t&&(t.style.transition="transform 0.5s ease, opacity 0.5s ease",t.style.transform=`translateX(${1e3*s}px) rotate(${45*s}deg)`,t.style.opacity="0",setTimeout(()=>{e.prepend(t),t.style.transition="none",t.style.transform="scale(0.8) translateY(-60px)",t.style.opacity="0",t.style.cursor="grab",t.offsetWidth,r()},300))}),r=()=>{const e=Array.from(document.querySelectorAll(".stack-card"));e.forEach(e=>{e.style.cursor="default",e.removeEventListener("mousedown",c),e.removeEventListener("touchstart",c);const t=e.querySelector(".window-dots");t&&(t.onclick=null)}),e.forEach((t,s)=>{const n=CONFIG.cards.scaleFactor,i=CONFIG.cards.offsetY,a=e.length-1-s;t.style.zIndex=s,t.style.transform=`scale(${1-a*n}) translateY(-${a*i}px)`,t.style.opacity=s<e.length-3?0:1,t.style.transition="transform 0.5s cubic-bezier(0.2, 0.8, 0.2, 1), opacity 0.5s ease"});const t=e[e.length-1];if(t){t.style.cursor="grab",t.addEventListener("mousedown",c),t.addEventListener("touchstart",c);const e=t.querySelector(".window-dots");e&&(e.onclick=e=>{e.stopPropagation(),o(t,1)})}},c=function(e){e.target.closest(".github-btn")||e.target.closest(".window-dots")||(t=!0,i=this,s=e.type.includes("mouse")?e.clientX:e.touches[0].clientX,n=s,i.style.cursor="grabbing",i.style.transition="none",document.addEventListener("mousemove",l),document.addEventListener("touchmove",l),document.addEventListener("mouseup",d),document.addEventListener("touchend",d))},l=e=>{if(!t||!i)return;n=e.type.includes("mouse")?e.clientX:e.touches[0].clientX;const a=n-s,o=.05*a;i.style.transform=`translateX(${a}px) rotate(${o}deg)`},d=()=>{if(!t||!i)return;t=!1,document.removeEventListener("mousemove",l),document.removeEventListener("touchmove",l),document.removeEventListener("mouseup",d),document.removeEventListener("touchend",d);const e=n-s;if(Math.abs(e)>a){const t=e>0?1:-1;if(t>0)o(i,t);else{const e=i,t=e.dataset.liveDemo,s=t&&""!==t&&"null"!==t?t:e.dataset.github;e.style.transition="transform 0.3s ease, opacity 0.3s ease",e.style.transform="translateX(-100px) scale(0.95)",e.style.opacity="0.7",setTimeout(()=>{window.open(s,"_blank"),setTimeout(()=>{e.style.transition="transform 0.5s cubic-bezier(0.2, 0.8, 0.2, 1), opacity 0.3s ease",e.style.transform="",e.style.opacity=""},100)},200)}}else i.style.transition="transform 0.5s cubic-bezier(0.2, 0.8, 0.2, 1)",i.style.transform="scale(1) translateY(0)";i=null,n=0,s=0};r()};document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".typing-effect");if(e){new TypingEffect(e,CONFIG.typing.texts,CONFIG.typing).start()}const t=initializeSmoothScroll();setupAnchorLinks(t);const s=document.querySelector(".track-forward"),n=document.querySelector(".track-reverse");s&&n&&(populateCarouselTrack(s,CONFIG.carousel.skills),populateCarouselTrack(n,CONFIG.carousel.skills),animateCarousel(s,n,t)),initializeMobileMenu(),initializeCustomCursor();const i=document.querySelector(".card-stack");i&&(renderProjectCards(i,PROJECTS_DATA),initializeCardStack(i)),initializeResumeViewer()});const initializeResumeViewer=()=>{const e=document.getElementById("resumeViewerOverlay"),t=document.getElementById("openResumeViewer"),s=document.getElementById("closeResumeViewer");t&&e&&t.addEventListener("click",t=>{t.preventDefault(),e.classList.add("active"),document.body.style.overflow="hidden";const s=document.getElementById("pdfIframe");s&&!s.src&&s.getAttribute("data-src")&&(s.src=s.getAttribute("data-src"))});const n=()=>{e&&(e.classList.remove("active"),document.body.style.overflow="")};s&&s.addEventListener("click",n),e&&e.addEventListener("click",t=>{t.target===e&&n()}),document.addEventListener("keydown",t=>{"Escape"===t.key&&e&&e.classList.contains("active")&&n()})};